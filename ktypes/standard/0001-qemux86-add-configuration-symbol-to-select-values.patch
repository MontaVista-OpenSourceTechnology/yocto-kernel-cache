From 1c56f2a0d1ded83c334aa7a0406551815a16c5a4 Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@gmail.com>
Date: Mon, 22 Feb 2021 09:53:04 -0500
Subject: [PATCH] qemux86: add configuration symbol to select values

On 5.10+ we are seeing some MSI interrupt assignment errors. In
our emulated 32bit platform, we are lacking this support. To avoid
the warnings, we define our own platform and select the MSI arch
fallback, which handles the missing support.

Signed-off-by: Bruce Ashfield <bruce.ashfield@gmail.com>
---
 arch/x86/Kconfig | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/x86/Kconfig b/arch/x86/Kconfig
index 3a5ecb1039bf..061f9f5f1933 100644
--- a/arch/x86/Kconfig
+++ b/arch/x86/Kconfig
@@ -483,6 +483,12 @@ config X86_CPU_RESCTRL
 
 	  Say N if unsure.
 
+config QEMUX86
+	bool "Enable for qemumx86 specific configurations"
+	default n
+	select PCI_MSI_ARCH_FALLBACKS if PCI_MSI
+
+
 if X86_32
 config X86_BIGSMP
 	bool "Support for big SMP systems with more than 8 CPUs"
-- 
2.19.1

